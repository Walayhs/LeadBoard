{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pull Requests</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}">
    
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
</head>
<body>
    <div class="container table-container">
        <table id="pullRequestsTable" class="display table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Avatar</th>
                    <th>Name</th>
                    <th>Title</th>
                    <th>State</th>
                    <th>URL</th>
                    <th>Labels</th>
                </tr>
            </thead>
            <tbody>
                {% for pr in pull_requests %}
                <tr>
                    <td class="rank">{{ forloop.counter }}</td>
                    <td><img src="{{ pr.contributor.avatar_url }}" class="img-fluid badge-img" alt="{{ pr.contributor.username }}'s Avatar"></td>
                    <td>{{ pr.contributor.username }}</td>
                    <td>{{ pr.title }}</td>
                    <td>{{ pr.state }}</td>
                    <td><a href="{{ pr.url }}" target="_blank">{{ pr.url }}</a></td>
                    <td>
                        {% for label in pr.labels %}
                            <span class="badge-label">{{ label.name }}</span>
                        {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


    <!-- External JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>

<!-- Local JS (if needed) -->
    {% comment %} <script src="{% static 'js/custom.js' %}"></script> {% endcomment %}

    <script>
        $(document).ready(function() {
            $('#pullRequestsTable').DataTable({
                "pagingType": "simple_numbers",
                "searching": true,
                "ordering": true,
                "order": [[ 0, "asc" ]],
                "responsive": true,
                "scrollX": true,
                "lengthChange": false,
                "dom": '<"top"f>rt<"bottom"lp><"clear">',
                "language": {
                    "paginate": {
                        "previous": "Prev",
                        "next": "Next"
                    }
                }
            });
        });
    </script>

        
    
</body>
</html>
